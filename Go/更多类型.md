# 更多类型
### 指针

指针保存了值的内存地址

*T 是指向 T 类型的指针

` var p *int `

& 会生成一个指向其操作数的指针

```
i := 42
p = &i
```

### 结构体

一个结构体是一组字段，修改结构体需要通过指针修改
```
package main

import "fmt"

type Vertex struct {
	X, Y int
}

var (
	v1 = Vertex{1, 2}  // 创建一个 Vertex 类型的结构体
	v2 = Vertex{X: 1}  // Y:0 被隐式地赋予
	v3 = Vertex{}      // X:0 Y:0
	p  = &v1 
)

func main() {
	fmt.Println(v1)
	p.X = 3
	fmt.Println(v1)
}
```

### 数组

[n]T 表示一个拥有T类型的数组

` var a [10]int `

```
package main

import "fmt"

func main() {
	var a [2]string
	a[0] = "hello"
	a[1] = "world"
	array := [3]int{1,2,3}
	fmt.Println(a, array)
}
```

### 切片
[]T 表示一个T类型的切片，切片通过两个下标来界定 ` a[low : high] ` 包括第一个元素，排除最后一个

切片是数组的引用，更改切片，会影响源数组

切片有长度，容量
长度是现有元素个数
容量是从第一个元素到底层数组最后一个元素的个数
```
package main

import "fmt"

func main() {
	s := []int{2, 3, 5, 7, 11, 13}
	printSlice(s)

	// 截取切片使其长度为 0
	s = s[:0]
	printSlice(s)

	// 拓展其长度
	s = s[:4]
	printSlice(s)

	// 舍弃前两个值
	s = s[2:]
	printSlice(s)
}

func printSlice(s []int) {
	fmt.Printf("len=%d cap=%d %v\n", len(s), cap(s), s)
}
```

返回
```
len=6 cap=6 [2 3 5 7 11 13]
len=0 cap=6 []
len=4 cap=6 [2 3 5 7]
len=2 cap=4 [5 7]
```

用make创建切片
创建一个元素为零值的数组，并返回它的切片。第二个参数为长度，第三个为容量
```
package main

import "fmt"

func main() {
	a := make([]int, 5)
	for i := 0; i < 5; i++ {
		a[i] = i
	}
	fmt.Println(a)
```
二维切片
```
package main

import (
	"fmt"
	
)

func main() {
	a := make([][]int, 5)
	for i := 0; i < 5; i++ {
		a[i] = make([]int, 4)
		for j := 0; j < 4; j++ {
			a[i][j] = j
		}
	}
	fmt.Println(a)
}
```

给切片添加元素
```
package main

import "fmt"

func main() {
	var s []int
	printSlice(s)

	// 添加一个空切片
	s = append(s, 0)
	printSlice(s)

	// 这个切片会按需增长
	s = append(s, 1)
	printSlice(s)

	// 可以一次性添加多个元素
	s = append(s, 2, 3, 4)
	printSlice(s)
}

func printSlice(s []int) {
	fmt.Printf("len=%d cap=%d %v\n", len(s), cap(s), s)
}
```

用range遍历，第一个为下标，第二个为值的副本（注意是值的副本）
可以用 ` _ ` 忽略下标或值
```
package main

import "fmt"

func main() {
    slice := []int{0, 1, 2, 3}
    myMap := make(map[int]*int)

    for index, value := range slice {
    // 如果此处是 myMap[index] = &value,则得到的均是3
        num := value
        myMap[index] = &num
    }
    fmt.Println("=====new map=====")
    prtMap(myMap)
}

func prtMap(myMap map[int]*int) {
    for key, value := range myMap {
        fmt.Printf("map[%v]=%v\n", key, *value)
    }
}
```

### 映射
```
package main

import "fmt"

func main() {
	m := make(map[int]int)
	m[0] = 1
	m[1] = 2
	fmt.Println(m)
}

package main

import "fmt"

type Vertex struct {
	Lat, Long float64
}

var m = map[string]Vertex{
	"Bell Labs": {40.68433, -74.39967},
	"Google":    {37.42202, -122.08408},
}

func main() {
	fmt.Println(m)
}
```

修改映射

插入或修改

` m[0] = 2 `

获取元素

` a = m[0] `

删除

` delete(m, key) `

判断某元素是否存在
` a, ok := m[key] `
如果存在of 为true 不存在 ok 为false a为元素零值
